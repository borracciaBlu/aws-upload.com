<!doctype html>
<html class="no-js doc">
<head>
    <meta charset="utf-8">
    
    <title>aws-upload - A delicious CLI Tool for uploading files to ec2 : Guide</title>

    <meta name="keywords" content="rsync, aws, upload, ec2, php, composer">
    <meta name="description" content="A delicious CLI Tool for uploading files to ec2. Clean, tab ready, rsync powered.">

    <meta property="og:type" content="article">
    <meta property="og:title" content="aws-upload">
    <meta property="og:description" content="aws-upload - A delicious CLI Tool for uploading files to ec2">
    <meta property="og:image" content="https://aws-upload.io/images/aws-upload-logo.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="aws-upload">
    <meta name="twitter:description" content="aws-upload - A delicious CLI Tool for uploading files to ec2">
    <meta name="twitter:image" content="https://aws-upload.io/images/aws-upload-logo.png">

    <meta name="application-name" content="aws-upload"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui" />

    <link rel="shortcut icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="76x76" href="favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
    <link rel="manifest" href="favicons/manifest.json">
    <link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <link rel="canonical" href="https://aws-upload.io/" />
    <link href=".//css/inline-doc.css?__inline=true" rel="stylesheet" data-inlined="true" />
</head>
<body>

    <div class="nav-bar fixed">
        <div class="container">
            <button class="nav-bar--burger" onclick="javascript: this.classList.toggle('open');"></button>
            
            <a href="./">
                <img src="images/aws-upload-logo.png" 
                     alt="aws-upload - A delicious CLI Tool for uploading files to ec2"
                     class="nav-bar--logo">
            </a>

            <div class="nav-bar--menu">
                <a href="" class="nav-bar--link">Guide ↗</a>
                <a href="https://github.com/borracciaBlu/aws-upload" class="nav-bar--link">Github ↗</a>
            </div>

            <div class="nav-bar--mobile">
                <div class="doc--sidebar">
                    <h2>Guide</h2>
                    <h3>Introduction</h3>
                    <ul>
                    <li><a href="#the-main-idea">The main idea</a></li>
                    <li>
                        <ul>
                            <li><a href="#what-is-aws-upload">What is aws-upload?</a></li>
                            <li><a href="#why">Why</a></li>
                            <li><a href="#why-not">Why not</a></li>
                        </ul>
                    </li>
                    </ul>

                    <h3>Basic Setup</h3>
                    <ul>
                    <li><a href="#getting-started">Getting Started</a></li>
                    <li>
                        <ul>
                            <li><a href="#installation">Installation</a></li>
                            <li><a href="#enabling-tab-completion">Enabling tab-completion</a></li>
                            
                            <li><a href="#speacking-aws-upload">Speacking aws-upload: proj, env and keys</a></li>
                            <li><a href="#your-first-deploy">Your first deploy</a></li>
                        </ul>
                    </li>
                    </ul>

                    <h3>Advanced</h3>
                    <ul>
                    <li><a href="#settings">The setting files</a></li>
                    <li>
                        <ul>
                            <li><a href="#the-file-structure">The file structure</a></li>
                            <li><a href="#examples">Examples</a></li>
                        </ul>
                    </li>
                    </ul>

                </div>
            </div>
        </div>
    </div>

    <div class="doc--container">
        <div class="doc--sidebar--external">
            <div class="doc--sidebar">
                <h2>Guide</h2>
                <h3>Introduction</h3>
                <ul>
                <li><a href="#the-main-idea">The main idea</a></li>
                <li>
                    <ul>
                        <li><a href="#what-is-aws-upload">What is aws-upload?</a></li>
                        <li><a href="#why">Why</a></li>
                        <li><a href="#why-not">Why not</a></li>
                    </ul>
                </li>
                </ul>

                <h3>Basic Setup</h3>
                <ul>
                <li><a href="#getting-started">Getting Started</a></li>
                <li>
                    <ul>
                        <li><a href="#installation">Installation</a></li>
                        <li><a href="#enabling-tab-completion">Enabling tab-completion</a></li>
                        
                        <li><a href="#speacking-aws-upload">Speacking aws-upload: proj, env and keys</a></li>
                        <li><a href="#your-first-deploy">Your first deploy</a></li>
                    </ul>
                </li>
                </ul>

                <h3>Advanced</h3>
                <ul>
                <li><a href="#settings">The setting files</a></li>
                <li>
                    <ul>
                        <li><a href="#the-file-structure">The file structure</a></li>
                        <li><a href="#examples">Examples</a></li>
                    </ul>
                </li>
                </ul>

            </div>
        </div>

        <div class="doc--body">
            <div class="doc--body--container">
                
            <a id="the-main-idea" class="anchor"></a>
            <h1>The main idea</h1>
            
            <a id="what-is-aws-upload" class="anchor"></a>
            <h2>
                <span>#</span> What is aws-upload?
            </h2>
            <p>aws-upload is a <strong>CLI Tool </strong> to rapid deploy files on your server. 
            Unlike other scripts or tools, aws-upload is designed to maximize efficiency, speed, and automation. </p>
            <p>The core functionality is based on rsync to deploy only what you need. It will automatically compress and upload only the files you change it. </p>

            <a id="why" class="anchor"></a>
            <h2>
                <span>#</span> Why
            </h2>
            <p>The project was born because a frustration I got at work.
            We had a lot of small projects in place and no deploy system. </p>
            <p>At the beginning, we were using just standard FTP clients (eg. FileZilla).</p>
            <p>But this process was just tedious and full of errors.
            Find the folders, upload only the correct files (do not upload .git folders for example).</p>
            <p>Later on, I start using rsync, but the command was just too verbose, especially when you start to exclude some folder or file from the upload.</p>
            <p>I start to use <code>alias</code> then, but it was messy and painful to debug and to share with my colleagues.</p>
            <p>If you did a mistake in the alias, you have to change the bash script and reload the shell.</p>
            <p>At the end, I finished writing a PHP script to fix the problem: aws-upload was born.</p>

            <a id="why-not" class="anchor"></a>
            <h2>
                <span>#</span> Why not
            </h2>
            <p>aws-upload does just one thing, deploy.</p>

            <p>
            I think if you are playing with a huge project in which you need to automate a little bit more (eg. testing before deploy, building systems, versioning for each server) aws-upload is not for you.
            </p>

            <p>
            In these cases, you should have a proper deployment automation in place, maybe with some CI system.
            </p>

            <a id="getting-started" class="anchor"></a>
            <h1>Getting Started</h1>

            <a id="installation" class="anchor"></a>
            <h2>
                <span>#</span> Installation
            </h2>

            <blockquote>
            <p>This guide assume you are already familiar with composer and you have it installed on you machine. If you don't have composer follow the guide <a href="https://getcomposer.org/download/">here</a> to install it.</p>
            </blockquote>

            <p>To install aws-upload we will use Composer.<br>
            Run this in your terminal to get the latest aws-upload version:</p>

            <figure class="highlight bash">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line"><span class="comment"># get latest stable</span></div>
                                <div class="line">$ composer global require aws-upload/aws-upload</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>


            <p>When the procedure is completed you can verify that all is good by typing:</p>
            <figure class="highlight bash">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line">$ aws-upload -V</div>
                                <div class="line"><span class="comment">#  in the shell you should see something like</span></div>
                                <div class="line">aws-upload version x.x.x</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>

            <a id="enabling-tab-completion" class="anchor"></a>
            <h2>
                <span>#</span> Enabling tab-completion
            </h2>

            <blockquote>
            <p>The tab completion is done by the shell you are using it.</p>
            </blockquote>

            <p>Right now the only shell supported is <a href="http://www.zsh.org/">zsh</a> in combination with <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>.</p>
            <p>In order to achieve the tab-completion like in the screen shot you have to install the zsh plugin aws-upload-zsh.</p>
            <p>To install aws-upload-zsh follow the instructions <a href="https://github.com/borracciaBlu/aws-upload-zsh">here</a>.</p>

            <a id="speacking-aws-upload" class="anchor"></a>
            <h2>
                <span>#</span> Speacking aws-upload: proj, env and keys
            </h2>

            <p>There are some concept that you have to be aware if you want to use properly aws-upload.  </p>
            <p><strong>Project:</strong> the project is a label to identify the a project you are working on. <br>
            You can not use a <code>.</code> in the project label.<br>
            <u>Abbreviation:</u> <code>proj</code>.<br>
            <u>Examples:</u> [blog, client-name].</p>
            <p><strong>Environments:</strong> the environment is a label to identify a specific environment or setup.
            You can not use a <code>.</code> in the environment label.<br>
            <u>Abbreviation:</u> <code>env</code>.<br>
            <u>Examples:</u> [dev, stag, prod].</p>
            <p><strong>Keys:</strong> the key is a shortcut to identify a project in combination with a enviromnents.<br>
            The syntax is: <code>proj.env</code> . </p>
            <table class="table">
                <thead>
                    <tr>
                        <th></th>
                        <th align="center">dev</th>
                        <th align="center">stag</th>
                        <th align="center">prod</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>blog</strong></td>
                        <td align="center">blog.dev</td>
                        <td align="center">blog.stag</td>
                        <td align="center">blog.prod</td>
                    </tr>
                    <tr>
                        <td><strong>client-name</strong></td>
                        <td align="center">client-name.dev</td>
                        <td align="center">client-name.stag</td>
                        <td align="center">client-name.prod</td>
                    </tr>
                </tbody>
            </table>

            <a id="your-first-deploy" class="anchor"></a>
            <h2>
                <span>#</span> Your first deploy
            </h2>

            <p>Before to deploy with aws-upload you have to create a setting file.
            To create a setting file:</p>

            <figure class="highlight bash">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line">$ aws-upload new [key]</div>
                                <div class="line"><span class="comment"># in the case of proj:blog env:dev</span></div>
                                <div class="line">$ aws-upload new blog.dev</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>


            <p>This command will generate a setting file for this key. Now you have to edit it.<br>
            To edit you can type:</p>
            
            <figure class="highlight bash">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line"><span class="comment"># to edit the setting file</span></div>
                                <div class="line">$ aws-upload edit blog.dev</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>

            <p>Now you are ready to deploy.<br>To deploy edit:</p>

            <figure class="highlight bash">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line"><span class="comment"># to deploy!</span></div>
                                <div class="line">$ aws-upload blog dev</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>
            <p>Done.</p>

            <a id="settings" class="anchor"></a>
            <h1>The setting files</h1>

            <a id="the-file-structure" class="anchor"></a>
            <h2>
                <span>#</span> The file structure
            </h2>

            <p>This is the structure of a setting file. <br> As you can see there are <strong>4 main parts</strong>: <code>pem</code>, <code>local</code>, <code>remote</code>, <code>exclude</code>.</p>

            <figure class="highlight js">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line">{</div>
                                <div class="line">    <span>"pem"</span> : <span>"/home/keys/your-key.pem"</span>,</div>
                                <div class="line">    <span>"local"</span> : <span>"/var/www/project/*"</span>,</div>
                                <div class="line">    <span>"remote"</span> : <span>"ubuntu@ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com:/var/www/html"</span>,</div>
                                <div class="line">    <span>"exclude"</span> : [</div>
                                <div class="line">        <span>".env"</span>,</div>
                                <div class="line">        <span>".git/"</span>,</div>
                                <div class="line">        <span>"storage/"</span>,</div>
                                <div class="line">        <span>"tests/"</span>,</div>
                                <div class="line">        <span>"node_modules/"</span></div>
                                <div class="line">    ]</div>
                                <div class="line">}</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>

            <p><strong>pem</strong> | <em>string</em>:  it contains the path to your pem key.<br>
            <strong>local</strong> | <em>string</em>: it contains the path to the directory you want to upload to your ec2 server.<br>
            <strong>exclude</strong> | <em>array</em>: it contains the list of files or folders you DO NOT want to upload. <br>
            <strong>remote</strong> | <em>string</em>: it contains the information of your server.<br>
            In particular [<em>user</em>]@[<em>host</em>]:[<em>remotePath</em>] where:</p>
            <ul>
            <li><strong>user</strong>: is you user on your server. Possibles values [ec2-user, ubuntu]</li>
            <li><strong>host</strong>: is your ec2 host name. Similar value [ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com]  </li>
            <li><strong>remotePath</strong>: is the folder you want to upload your project to. It's the folder on your server.</li>
            </ul>

            <a id="examples" class="anchor"></a>
            <h2>
                <span>#</span> Examples
            </h2>
            
            <h3>Deploy on ec2 / ubuntu AMI</h3>
            <figure class="highlight js">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line">{</div>
                                <div class="line">    <span>"pem"</span> : <span>"/home/username/ssh/your-key.pem"</span>,</div>
                                <div class="line">    <span>"local"</span> : <span>"/var/www/project/*"</span>,</div>
                                <div class="line">    <span>"remote"</span> : <span>"ubuntu@ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com:/var/www/html"</span>,</div>
                                <div class="line">    <span>"exclude"</span> : [</div>
                                <div class="line">        <span>".env"</span>,</div>
                                <div class="line">        <span>".git/"</span>,</div>
                                <div class="line">        <span>"node_modules/"</span></div>
                                <div class="line">    ]</div>
                                <div class="line">}</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>


            <h3>Deploy on ec2 / Amazon Linux AMI</h3>
            <figure class="highlight js">
                <table>
                    <tbody>
                        <tr><td class="code">
                            <pre>
                                <div class="line">{</div>
                                <div class="line">    <span>"pem"</span> : <span>"/home/username/ssh/your-key.pem"</span>,</div>
                                <div class="line">    <span>"local"</span> : <span>"/var/www/project/*"</span>,</div>
                                <div class="line">    <span>"remote"</span> : <span>"ubuntu@ec2-xxx-xxx-xxx-xxx.compute-1.amazonaws.com:/var/www/html"</span>,</div>
                                <div class="line">    <span>"exclude"</span> : [</div>
                                <div class="line">        <span>".env"</span>,</div>
                                <div class="line">        <span>".git/"</span>,</div>
                                <div class="line">        <span>"node_modules/"</span></div>
                                <div class="line">    ]</div>
                                <div class="line">}</div>
                            </pre>
                        </td></tr>
                    </tbody>
                </table>
            </figure>

            </div>
        </div>
    </div>

<link rel="stylesheet" href="./css/main.css" />

<script> 
if (document.domain === "www.aws-upload.io" ||
    document.domain === "aws-upload.io") {

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxx', 'auto');
  ga('send', 'pageview');
}
</script>

<script>
   WebFontConfig = {
      google: { families: ['Open Sans:400', 'Source Code Pro:400'] }
   };

   (function(d) {
      var wf = d.createElement('script'), s = d.scripts[0];
      wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js';
      s.parentNode.insertBefore(wf, s);
   })(document);
</script>

<script>
    (function(d) {
        var a = d.querySelectorAll('.nav-bar--mobile a');

        for (var i = a.length - 1; i >= 0; i--) {
            a[i].addEventListener('click', function(e) {
                d.querySelector('.nav-bar--burger').classList.remove('open');
                console.log('yea');
            });
        }
    })(document);
</script>

</body>
</html>